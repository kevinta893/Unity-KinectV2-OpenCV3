language: objective-c
osx_image: xcode9.2
rvm:
- 2.2         #see before_install for getting RVM stable.

env:
- PACKAGE_VERSION="1.0"

cache:
  directories:
    - /Applications/Unity

before_install:
- rvm get stable
- chmod a+x ./travis-build/*.sh

install:
- cat /etc/hosts
- ./travis-build/install-unity.sh

script:
- ./travis-build/build.sh && ./travis-build/run-tests.sh

after_success:
- ./travis-build/export-unity-package.sh && ./travis-build/prepare-unity-release.sh "$PACKAGE_VERSION"
